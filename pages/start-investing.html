<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invest in Startups Online | StartEngine</title>
    <link rel="stylesheet" href="./../styles/kanav_common_style.css">
    <link rel="stylesheet" href="./../styles/start-investing-style.css">
    <link href="https://d19j0qt0x55bap.cloudfront.net/production/assets/favicon-79f58af77fc082ce75bd69fc8bdb2dfd.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
    <!-- <link rel="stylesheet" href="./../styles/index.css"> -->
</head>
<body>
    <!-- Nav Bar Start -->
    <nav id="nav_cont">
        <div id="nav_logo_div">
            <a href="./../index.html">
                <img id="nav_logo_img" src="./../images/StartEngine_nav_logo.png">
            </a>
        </div>
        <div id="nav_ele">
            <a id="nav_anchor_Signin" onclick="showdropdown()" href="./../pages/login.html">Sign In</a>
            <a id="nav_anchor_getfunding" href="./../pages/funding.html">Get Funding</a>
            <a id="nav_anchor_fill_startinvesting" href="./../pages/start-investing.html"><span>Start Investing</span></a>
        </div>
        <div id="nav_menu_cont" ><img onclick="showtransition()" id="nav_menu_logo"src="../images/menu_black.svg" alt="logo_menu"></div>
    </nav>
    <div class="index_nav_drop">
        <p>Hello,<span id="drop_username">username</span> </p>
        <p onclick="signout()">Sign Out</p>
    </div>

    <div id="nav_transition">
        <ul>
           <li> <a id="nav_anchor_fill_startinvesting_transiton" href="./pages/start-investing.html"><span>Start Investing</span></a></li>
           <li><a id="nav_anchor_getfunding_transition" href="./pages/funding.html">Get Funding</a></li>
           <li onclick="showdropdown_mini()"><a id="drop_username_mini"   href="./pages/login.html">Sign In</a></li>
           <li><p  id="index_mini_logout_p"></p></li>
        </ul>
    </div>


    <!-- Nav Bar End -->

    <div class="discover-splash">
        <h1>Find a company. Become its next investor.</h1>
        <span class="trading-soon-inner-span">Signed to Trade on StartEngine Secondary</span>
    </div>
    <div class="filters">
        <select class="investment-type">
            <option value="default">Filter by Progress</option>
            <option value="inProgress">In Progress</option>
            <option value="completed">Completed Campaigns</option>
        </select>
        <select class="category"></select>
        <select class="ordering">
            <option value="mostFunded">Most Funded</option>
            <option value="recentlyLaunched">Recently Launched</option>
        </select>
    </div>
    <div class="discover-wrap">
        <div class="discover">
            <div class="results-and-sorting">
                <div class="row">
                    <h2 class="text-center results-length">
                        Discover
                        <span class="text-success"> <!-- Append the length of result here --> </span>
                        Investments
                    </h2>
                </div>
                <div class="row results">
                    <div class="all-tombstones">
                        <!-- Make divs here with class tombstone and dynamic id with tombstone_firstName -->
                    </div>
                </div>
            </div>
        </div>
    </div>

      <!-- Footer Start -->
    <div id="index_footer_container">


        <div id="index_footer_about">
              <div class="index_footer_div_1" >
                               <img id="index_footer_div_img_logo" src="./../images/StartEngine_nav_logo.png">
                               <p id="index_footer_reserved_rights">© 2020 All Rights Reserved</p>
              </div>
            <div class="index_footer_div"> 
                                           <p class="index_footer_div_heading">About</p>
                                           <p>Our Team</p>
                                           <p>Equity Crowdfunding 101</p>
                                           <p>Blog</p>
                                           <p>StartEngine Careers</p>
                                           <p>Portfolio Job Board</p>
            </div>
            <div class="index_footer_div">
                                           <p class="index_footer_div_heading">Companies</p>
                                           <p>Raise Capital</p>
                                           <p>How it Works</p>
                                           <p>Why StartEngine</p>
                                           <p>Founder FAQ</p>
                                           <p>Refer Founders</p>
                                           <p>Partnerships</p>
            </div>
            <div class="index_footer_div">
                                        <p class="index_footer_div_heading">Investors</p>
                                         <p>Start Investing</p>
                                            <p>How Investing Works</p>
                                            <p>Investor FAQ</p>
                                            <p>Earn 10% Bonus Shares</p>
                                            <p>Form CRS</p>
                                        </div>
            <div class="index_footer_div">   <p class="index_footer_div_heading">Legal/Contact</p>
                                            <p>Terms of Use</p>
                                           <p>Privacy Policy</p>
                                           <p>Disclaimer</p>
                                           <p>Annual Reports</p>
                                           <p>Help Center</p>
                                           <p>Contact Us</p>
                                        </div>
          
        
        
        </div>
        
        
        
        <div id="index_important_message">
            <p class="index_important_message_bold">Important Message</p>
            <p>IN MAKING AN INVESTMENT DECISION, INVESTORS MUST RELY ON THEIR OWN EXAMINATION OF THE ISSUER AND THE TERMS OF THE OFFERING, INCLUDING THE MERITS AND RISKS INVOLVED. INVESTMENTS ON STARTENGINE ARE SPECULATIVE, ILLIQUID, AND INVOLVE A HIGH DEGREE OF RISK, INCLUDING THE POSSIBLE LOSS OF YOUR ENTIRE INVESTMENT.​</p>
           <p> <span class="index_important_message_bold"> <a href="index.html">www.StartEngine.com</a> </span> is a website owned and operated by StartEngine Crowdfunding, Inc. (“StartEngine”), which is neither a registered broker-dealer, investment advisor nor funding portal.</p>
           <p>Unless indicated otherwise with respect to a particular issuer, all securities-related activity is conducted by regulated affiliates of StartEngine: StartEngine Capital, LLC, a funding portal registered here with the US Securities and Exchange Commission (SEC) and here as a member of the Financial Industry Regulatory Authority (FINRA), or StartEngine Primary, LLC, a broker-dealer registered with the SEC and FINRA/SIPC. You can review the background of our broker-dealer and our investment professionals on FINRA’s BrokerCheck here. StartEngine Secondary is an alternative trading system regulated by the SEC and operated by StartEngine Primary, LLC, a broker dealer registered with the SEC and FINRA.</p>
           <p>Investment opportunities posted and accessible through the site are of three types:</p>
           <p>1) Regulation A offerings (JOBS Act Title IV; known as Regulation A+), which are offered to non-accredited and accredited investors alike. These offerings are made through StartEngine Primary, LLC (unless otherwise indicated). 2) Regulation D offerings (Rule 506(c)), which are offered only to accredited investors. These offerings are made through StartEngine Primary, LLC. 3) Regulation Crowdfunding offerings (JOBS Act Title III), which are offered to non-accredited and accredited investors alike. These offerings are made through StartEngine Capital, LLC. Some of these offerings are open to the general public, however there are important differences and risks.</p>
           <p>Any securities offered on this website have not been recommended or approved by any federal or state securities commission or regulatory authority. StartEngine and its affiliates do not provide any investment advice or recommendation and do not provide any legal or tax advice with respect to any securities. All securities listed on this site are being offered by, and all information included on this site is the responsibility of, the applicable issuer of such securities. StartEngine does not verify the adequacy, accuracy or completeness of any information. Neither StartEngine nor any of its officers, directors, agents and employees makes any warranty, express or implied, of any kind whatsoever related to the adequacy, accuracy, or completeness of any information on this site or the use of information on this site. See additional general disclosures here.</p>
           <p>By accessing this site and any pages on this site, you agree to be bound by our Terms of Use and Privacy Policy, as may be amended from time to time without notice or liability.</p>
           <p>Canadian Investors</br>
        
            Investment opportunities posted and accessible through the site will not be offered to Canadian resident investors.</p>
        <p>Potential investors are strongly advised to consult their legal, tax and financial advisors before investing. The securities offered on this site are not offered in jurisdictions where public solicitation for offerings is not permitted; it is solely your responsibility to comply with the laws and regulations of your country of residence.</p>
        <p>Potential investors are strongly advised to consult their legal, tax and financial advisors before investing. The securities offered on this site are not offered in jurisdictions where public solicitation for offerings is not permitted; it is solely your responsibility to comply with the laws and regulations of your country of residence.</p>
        </div>
        </div>
        <!-- Footer End -->
    <script src="./../scripts/index.js"></script>
    <script>
        let projectsDb = JSON.parse(localStorage.getItem("projectsDb"));
        let industriesObj = {};
        
        projectsDb.sort((a,b)=>{
            return b.raisedFull.substring(1).replace(",","") - a.raisedFull.substring(1).replace(",","");
        })
        document.querySelector(".text-success").textContent = projectsDb.length;

        function displayProjects(projectsDb){
            projectsDb.forEach((project) =>{
                // Project Main Div Start
                let tombstoneDiv = document.createElement("div");
                tombstoneDiv.addEventListener('click',()=>{
                    projectDetailsToDB(project);
                });
                // Project Image Div Start
                let tombStoneCoverDiv = document.createElement("div");
                tombStoneCoverDiv.setAttribute("class","tombstone-cover");
                let tombStoneImage = document.createElement("img");
                tombStoneImage.setAttribute("src",project.imageSmallURL);
                tombStoneCoverDiv.appendChild(tombStoneImage);
                // Project Image Div End

                // Project Cover Banner Div Start
                let tombStoneCoverBannerDiv = document.createElement("div");
                tombStoneCoverBannerDiv.setAttribute("class","cover-banner");
                tombStoneCoverBannerDiv.textContent = project.coverBanner;
                // Project Cover Banner Div End

                // Project Content Div Start
                let tombStoneContentDiv = document.createElement("div");
                tombStoneContentDiv.setAttribute("class","tombstone-content");
                let tombStoneContentHeading = document.createElement("h5");
                tombStoneContentHeading.setAttribute("class","desc");
                tombStoneContentHeading.textContent = project.projectName;
                let tombStoneContentTagline = document.createElement("p");
                tombStoneContentTagline.setAttribute("class","tagline");
                tombStoneContentTagline.textContent = project.tagline;
                tombStoneContentDiv.append(tombStoneContentHeading,tombStoneContentTagline);
                // Project Content Div End

                // Project Progress Div Start
                let tombStoneProgressDiv = document.createElement("div");
                tombStoneProgressDiv.setAttribute("class","tombstone-progress");
                let tombStoneProgressBar = document.createElement("div");
                tombStoneProgressBar.setAttribute("class","progress-bar-success");
                tombStoneProgressDiv.appendChild(tombStoneProgressBar);
                // Project Progress Div End

                // Project Stats Div Start
                let tombStoneStatsDiv = document.createElement("div");
                tombStoneStatsDiv.setAttribute("class","tombstone-stats");

                let raisedDiv = document.createElement("div");
                raisedDiv.setAttribute("class","stat");
                let raisedAmount = document.createElement("div");
                raisedAmount.setAttribute("class","num");
                raisedAmount.textContent = project.raisedShort;
                let statsTitleRaised = document.createElement("span");
                statsTitleRaised.textContent = "Raised";
                raisedDiv.append(raisedAmount,statsTitleRaised);

                let investorsDiv = document.createElement("div");
                investorsDiv.setAttribute("class","stat");
                let investorsNum = document.createElement("div");
                investorsNum.setAttribute("class","num");
                investorsNum.textContent = project.investorsShort;
                let statsTitleInvestors = document.createElement("span");
                statsTitleInvestors.textContent = "Investors";
                investorsDiv    .append(investorsNum,statsTitleInvestors);

                let minInvestDiv = document.createElement("div");
                minInvestDiv.setAttribute("class","stat");
                let minInvestNum = document.createElement("div");
                minInvestNum.setAttribute("class","num");
                minInvestNum.textContent = project.minInvestShort;
                let statsTitleMinInvest = document.createElement("span");
                statsTitleMinInvest.textContent = "Min Invest";
                minInvestDiv.append(minInvestNum,statsTitleMinInvest);

                tombStoneStatsDiv.append(raisedDiv,investorsDiv,minInvestDiv)

                tombStoneContentDiv.append(tombStoneProgressDiv,tombStoneStatsDiv);
                // Project Stats Div End
                // Project Main Div End

                //Finally appending individual project Div to parent div
                tombstoneDiv.append(tombStoneCoverDiv,tombStoneCoverBannerDiv,tombStoneContentDiv);
                document.querySelector(".all-tombstones").appendChild(tombstoneDiv);
                
                if(industriesObj.hasOwnProperty(project.category)) industriesObj[project.category]++;
                else industriesObj[project.category] = 1;

            });
        }
        displayProjects(projectsDb);

        function projectDetailsToDB(project){
            console.log("Saving Project:",project);
            localStorage.setItem('projectDetails',JSON.stringify([project]));
            location.href = './project-details.html';
        }


        let industriesArr = [];
        for(keys in industriesObj){
            if(industriesObj[keys]>1) industriesArr.push(keys);
        }
        industriesArr.sort();
        let categoryOption = document.createElement("option");
        categoryOption.setAttribute("value","All Industries");
        categoryOption.textContent = "All Industries";
        document.querySelector(".category").appendChild(categoryOption);
        //Making options in category select box
        industriesArr.forEach((category)=>{
            let categoryOption = document.createElement("option");
            categoryOption.setAttribute("value",category);
            categoryOption.textContent = category;
            document.querySelector(".category").appendChild(categoryOption);
        });

        function categoryChange(){
            //console.log(`Selected ${document.querySelector(".category").value} `);
            document.querySelector(".ordering").value= "mostFunded";
            document.querySelector(".investment-type").value = "default";
            let selectedCategory = document.querySelector(".category").value;
            if(selectedCategory=="All Industries"){
                removeProjects();
                displayProjects(projectsDb);
                document.querySelector(".text-success").textContent = projectsDb.length;
            }else{
                let filteredObjects = [];
                projectsDb.forEach((project)=>{
                    if(project.category==selectedCategory) filteredObjects.push(project);
                })
                removeProjects();
                displayProjects(filteredObjects);
                document.querySelector(".text-success").textContent = filteredObjects.length;
            }
            
        }
        document.querySelector(".category").addEventListener('change',categoryChange);

        function orderByFunding(){
            //console.log(`Selected ${document.querySelector(".ordering").value} `);
            document.querySelector(".category").value = "All Industries";
            document.querySelector(".investment-type").value = "default";
            let selectedFunding = document.querySelector(".ordering").value;
            if(selectedFunding=="mostFunded"){
                removeProjects();
                displayProjects(projectsDb);
                document.querySelector(".text-success").textContent = projectsDb.length;
            }else{
                let filteredObjects = [...projectsDb];
                filteredObjects.sort((a,b)=>{
                    return a.investorsFull.replace(",","") - b.investorsFull.replace(",","");
                })
                removeProjects();
                displayProjects(filteredObjects);
                document.querySelector(".text-success").textContent = filteredObjects.length;
            }
        }
        document.querySelector(".ordering").addEventListener('change',orderByFunding);

        function filterProgress(){
            document.querySelector(".category").value = "All Industries";
            document.querySelector(".ordering").value= "mostFunded";
            let selectedProgress = document.querySelector(".investment-type").value;
            if(selectedProgress=="default" || selectedProgress=="inProgress"){
                removeProjects();
                displayProjects(projectsDb);
                document.querySelector(".text-success").textContent = projectsDb.length;
            }else{
                let filteredObjects = [];
                projectsDb.forEach((project)=>{
                    if(project.progressStatus==selectedProgress) filteredObjects.push(project);
                })
                removeProjects();
                displayProjects(filteredObjects);
                document.querySelector(".text-success").textContent = filteredObjects.length;
            }
        }
        document.querySelector(".investment-type").addEventListener('change',filterProgress);

        function removeProjects(){
            let removeProjects = document.querySelectorAll(".all-tombstones>div");
            removeProjects.forEach((rmProject)=>{
                rmProject.remove();
            });
        }
    </script>
</body>
</html>